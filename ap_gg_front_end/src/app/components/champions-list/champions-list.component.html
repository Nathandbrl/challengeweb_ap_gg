<div class="champions-container">
  <div class="header">
    <h1>Champions</h1>
    <p class="subtitle">Explorez tous les champions et leurs builds AP troll</p>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="loading" class="loading-spinner">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Chargement des champions...</p>
  </div>

  <div *ngIf="!loading && champions.length > 0" class="champions-content">
    <!-- Barre de recherche amÃ©liorÃ©e avec autocomplete -->
    <div class="search-container">
      <app-champion-search 
        (searchResults)="onSearchChange($event)"
        (championSelected)="onChampionSelected($event)"
      ></app-champion-search>
      <div class="search-results-count">
        {{ filteredChampions.length }} champion{{ filteredChampions.length !== 1 ? 's' : '' }}
      </div>
    </div>

    <!-- Onglets de filtrage par rÃ´le -->
    <mat-tab-group (selectedIndexChange)="filterByRole($event === 0 ? 'all' : getRoles()[$event - 1])"
                   class="role-tabs">
      <mat-tab label="Tous ({{ champions.length }})"></mat-tab>
      <mat-tab *ngFor="let role of getRoles()" 
               [label]="role + ' (' + (champions | slice: 0 | filter: role).length + ')'">
      </mat-tab>
    </mat-tab-group>

    <!-- Grille des champions -->
    <div class="champions-grid">
      <mat-card *ngFor="let champion of filteredChampions" 
                class="champion-card"
                [routerLink]="getChampionLink(champion.name)">
        <mat-card-header>
          <img [src]="champion.imageUrl || 'assets/default-champion.png'" 
               alt="{{ champion.name }}" 
               class="champion-image">
          <div class="champion-overlay">
            <button mat-raised-button color="accent" (click)="$event.stopPropagation()">
              <mat-icon>arrow_forward</mat-icon>
              Voir le Build
            </button>
          </div>
        </mat-card-header>
        
        <mat-card-content>
          <h3 class="champion-name">{{ champion.name }}</h3>
          <p class="champion-title">{{ champion.title }}</p>
          <span class="role-badge" [class]="'role-' + champion.role">{{ champion.role }}</span>
          
          <div class="stats">
            <div class="stat" *ngIf="champion.winRate">
              <span class="stat-icon">ðŸ“Š</span>
              <span class="stat-label">Taux de victoire</span>
              <span class="stat-value">{{ champion.winRate | number: '1.1-1' }}%</span>
            </div>
            <div class="stat" *ngIf="champion.pickRate">
              <span class="stat-icon">ðŸŽ¯</span>
              <span class="stat-label">Taux de pick</span>
              <span class="stat-value">{{ champion.pickRate | number: '1.1-1' }}%</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Message si aucun rÃ©sultat -->
    <div *ngIf="filteredChampions.length === 0" class="no-results">
      <mat-icon>search_off</mat-icon>
      <p>Aucun champion trouvÃ© pour "{{ searchQuery }}"</p>
    </div>
  </div>
</div>
